# 图片托管平台

一个现代化的图片托管和分享平台，支持图片上传、AI 生成、社交分享等功能。

## 功能特性

### 待实现功能

- 用户系统
    - [ ] 用户个人资料
        - 基本信息编辑（用户名、简介、个人网站等）
        - 账号安全设置
    - [ ] 头像上传
        - 支持裁剪和预览
        - 支持多种图片格式
    - [ ] 密码重置
        - 邮箱验证流程

- 图片管理
    - [ ] 图片上传
        - 拖拽上传
        - 多图片批量上传
        - 进度条显示
        - 自动压缩优化
    - [ ] 图片预览
        - 灯箱效果
        - 缩放和旋转
        - EXIF 信息显示
    - [ ] 图片编辑
        - 基础裁剪和旋转
        - 滤镜效果
        - 水印添加
    - [ ] 图片删除
        - 单张/批量删除
        - 回收站功能
    - [ ] 图片分类
        - 自定义标签
        - 智能分类
        - 按日期归档
    - [ ] 相册管理
        - 创建/编辑相册
        - 相册封面设置
        - 权限管理（公开/私密）

- AI 功能
    - [ ] AI 图片生成
        - 文本到图像生成
        - 多种模型选择
        - 批量生成
    - [ ] 提示词优化
        - 提示词推荐
        - 历史提示词管理
        - 社区热门提示词
    - [ ] 风格迁移
        - 预设风格模板
        - 自定义风格上传
        - 参数微调

- 社交功能
    - [ ] 图片分享
        - 社交平台一键分享
        - 分享链接生成
        - 嵌入代码生成
    - [ ] 点赞/收藏
        - 点赞动画效果
        - 收藏夹管理
        - 数据统计
    - [ ] 评论系统
        - 多级评论
        - 表情/图片评论
        - 评论通知
    - [ ] 用户关注
        - 关注/粉丝列表
        - 动态推送
        - 互动记录

- 探索页面
    - [ ] 图片流展示
        - 瀑布流布局
        - 无限滚动
        - 懒加载优化
    - [ ] 分类筛选
        - 多维度筛选
        - 标签云展示
        - 快速过滤
    - [ ] 搜索功能
        - 实时搜索提示
        - 高级搜索选项
        - 搜索历史记录
    - [ ] 排序功能
        - 多种排序方式
        - 自定义排序
        - 智能推荐

### 改进建议

#### 架构优化
- [ ] 引入状态管理库
  - 考虑使用 Zustand 或 Jotai 替代直接使用 React Hooks
  - 更好地管理全局状态，减少组件间的数据传递
- [ ] 实现错误边界处理
  - 添加全局错误捕获组件
  - 优化错误展示界面
- [ ] 性能优化
  - 实现组件懒加载
  - 添加图片预加载策略
  - 优化大型列表渲染性能

#### 用户体验
- [ ] 添加加载状态反馈
  - 实现全局加载状态管理
  - 优化骨架屏展示
  - 添加进度条反馈
- [ ] 优化表单交互
  - 添加表单验证提示
  - 实现实时字段校验
  - 优化提交反馈
- [ ] 增强移动端适配
  - 优化触摸操作体验
  - 改进移动端布局
  - 添加手势操作支持

#### 安全性
- [ ] 加强安全措施
  - 实现 CSRF 防护
  - 添加 Rate Limiting
  - 实现图片内容安全检查
- [ ] 完善权限控制
  - 细化用户权限等级
  - 实现资源访问控制
  - 添加操作审计日志

#### 可维护性
- [ ] 改进代码组织
  - 统一错误处理机制
  - 规范化 API 调用封装
  - 完善类型定义
- [ ] 增强测试覆盖
  - 添加单元测试
  - 实现集成测试
  - 添加端到端测试
- [ ] 优化构建流程
  - 配置持续集成
  - 优化构建性能
  - 实现自动化部署

#### 功能增强
- [ ] 增强图片处理
  - 添加更多图片编辑功能
  - 支持更多图片格式
  - 优化图片压缩算法
- [ ] 改进 AI 功能
  - 提供更多 AI 模型选择
  - 优化生成效果
  - 添加风格迁移预设
- [ ] 扩展社交功能
  - 实现更丰富的互动方式
  - 添加内容推荐系统
  - 优化社交分享体验

## 技术栈

- **框架**: Next.js 15
- **语言**: TypeScript
- **样式**: Tailwind CSS
- **UI 组件**: shadcn/ui
- **状态管理**: React Hooks
- **图标**: Lucide Icons

## 开发规范

### 代码风格
- 使用 ESLint 和 Prettier 保持代码风格一致
- 遵循 TypeScript 严格模式
- 组件采用函数式编程范式

### 提交规范
- 使用 Conventional Commits 规范
- 每次提交保持功能单一性
- 提交前进行代码审查

### 文档规范
- 及时更新 API 文档
- 编写清晰的组件文档
- 保持 README 文档更新

## 项目结构

- `app/` - Next.js 路由目录，包含页面、布局和服务端逻辑
- `components/` - 可复用的 UI 组件
- `hooks/` - 自定义 React Hooks
- `lib/` - Prisma 客户端及工具函数
- `data/` - 示例数据和初始化脚本
- `public/` - 静态资源目录
- `migrations/` - Prisma 迁移文件
- `schema.prisma` - 数据库模型定义
- `next.config.ts` - Next.js 配置
- `tailwind.config.ts` - Tailwind CSS 配置
- `tsconfig.json` - TypeScript 编译配置
- `auth.ts`/`auth.config.ts` - 认证逻辑与配置
- `middleware.ts` - 应用中间件

## 本地运行

1. 安装依赖
   ```bash
   npm install
   ```
2. 在项目根目录创建 `.env`，配置数据库与存储等环境变量，例如：
   ```env
   POSTGRES_PRISMA_URL=postgres://user:password@localhost:5432/db
   POSTGRES_URL_NON_POOLING=postgres://user:password@localhost:5432/db
   CLOUDFLARE_R2_ENDPOINT=https://<account>.r2.cloudflarestorage.com
   CLOUDFLARE_R2_ACCESS_KEY_ID=your-key
   CLOUDFLARE_R2_SECRET_ACCESS_KEY=your-secret
   CLOUDFLARE_R2_BUCKET_NAME=images
   JWT_SECRET=your-jwt-secret
   DASHSCOPE_API_KEY=your-api-key
   ```
3. 启动开发服务器
   ```bash
   npm run dev
   ```

